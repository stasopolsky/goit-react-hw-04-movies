{"ast":null,"code":"import _objectSpread from\"/Users/apple/Documents/front-end/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/apple/Documents/front-end/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/apple/Documents/front-end/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/apple/Documents/front-end/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/apple/Documents/front-end/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable  */import React,{Component}from\"react\";import queryString from\"query-string\";// import PropTypes from \"prop-types\";\nimport{Link}from\"react-router-dom\";import css from\"./MoviesPage.module.css\";import SearchBar from\"../components/SearchBar/SearchBar\";import*as articleAPI from\"../services/articles-api\";var Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);var _super=_createSuper(Movies);function Movies(){var _this;_classCallCheck(this,Movies);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={query:\"\",movies:[]// notFound: false,\n};_this.onChange=function(value){_this.setState({query:value});};_this.onSearch=function(query){_this.props.history.push(_objectSpread({},_this.props.location,{search:\"query=\".concat(query)}));articleAPI.getMoviesQuery(query).then(function(_ref){var data=_ref.data;_this.setState({movies:data.results});});};return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var parsed=queryString.parse(this.props.location.search).query;if(parsed){if(parsed!==undefined){articleAPI.getTrendingMovies(parsed).then(function(_ref2){var data=_ref2.data;_this2.setState({movies:data.results});});}}}},{key:\"render\",value:function render(){var _this$state=this.state,movies=_this$state.movies,query=_this$state.query;return/*#__PURE__*/React.createElement(\"div\",{className:css.moviesWrapper},/*#__PURE__*/React.createElement(SearchBar,{onSearch:this.onSearch,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"ul\",{className:css.resultList},movies.map(function(movie){return/*#__PURE__*/React.createElement(\"li\",{className:css.resultListItem,key:movie.id},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/movies/\".concat(movie.id),state:{id:movie.id,from:\"/movies\",search:\"query=\".concat(query)}}},movie.title||movie.name));})));}}]);return Movies;}(Component);export{Movies as default};","map":{"version":3,"sources":["/Users/apple/Documents/front-end/goit-react-hw-04-movies/src/pages/Movies.js"],"names":["React","Component","queryString","Link","css","SearchBar","articleAPI","Movies","state","query","movies","onChange","value","setState","onSearch","props","history","push","location","search","getMoviesQuery","then","data","results","parsed","parse","undefined","getTrendingMovies","moviesWrapper","resultList","map","movie","resultListItem","id","pathname","from","title","name"],"mappings":"01BAAA,qBACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA;AACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,yBAAhB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mCAAtB,CACA,MAAO,GAAKC,CAAAA,UAAZ,KAA4B,0BAA5B,C,GAEqBC,CAAAA,M,2TACnBC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,MAAM,CAAE,EACR;AAHM,C,OAiBRC,Q,CAAW,SAACC,KAAD,CAAW,CACpB,MAAKC,QAAL,CAAc,CAAEJ,KAAK,CAAEG,KAAT,CAAd,EACD,C,OAEDE,Q,CAAW,SAACL,KAAD,CAAW,CACpB,MAAKM,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,kBACK,MAAKF,KAAL,CAAWG,QADhB,EAEEC,MAAM,iBAAWV,KAAX,CAFR,IAIAH,UAAU,CAACc,cAAX,CAA0BX,KAA1B,EAAiCY,IAAjC,CAAsC,cAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CAClD,MAAKT,QAAL,CAAc,CAAEH,MAAM,CAAEY,IAAI,CAACC,OAAf,CAAd,EACD,CAFD,EAGD,C,+FAvBmB,iBAClB,GAAMC,CAAAA,MAAM,CAAGtB,WAAW,CAACuB,KAAZ,CAAkB,KAAKV,KAAL,CAAWG,QAAX,CAAoBC,MAAtC,EAA8CV,KAA7D,CACA,GAAIe,MAAJ,CAAY,CACV,GAAIA,MAAM,GAAKE,SAAf,CAA0B,CACxBpB,UAAU,CAACqB,iBAAX,CAA6BH,MAA7B,EAAqCH,IAArC,CAA0C,eAAc,IAAXC,CAAAA,IAAW,OAAXA,IAAW,CACtD,MAAI,CAACT,QAAL,CAAc,CAAEH,MAAM,CAAEY,IAAI,CAACC,OAAf,CAAd,EACD,CAFD,EAGD,CACF,CACF,C,uCAgBQ,iBACmB,KAAKf,KADxB,CACCE,MADD,aACCA,MADD,CACSD,KADT,aACSA,KADT,CAEP,mBACE,2BAAK,SAAS,CAAEL,GAAG,CAACwB,aAApB,eACE,oBAAC,SAAD,EAAW,QAAQ,CAAE,KAAKd,QAA1B,CAAoC,QAAQ,CAAE,KAAKH,QAAnD,EADF,cAEE,0BAAI,SAAS,CAAEP,GAAG,CAACyB,UAAnB,EACGnB,MAAM,CAACoB,GAAP,CAAW,SAACC,KAAD,qBACV,0BAAI,SAAS,CAAE3B,GAAG,CAAC4B,cAAnB,CAAmC,GAAG,CAAED,KAAK,CAACE,EAA9C,eACE,oBAAC,IAAD,EACE,EAAE,CAAE,CACFC,QAAQ,mBAAaH,KAAK,CAACE,EAAnB,CADN,CAEFzB,KAAK,CAAE,CACLyB,EAAE,CAAEF,KAAK,CAACE,EADL,CAELE,IAAI,CAAE,SAFD,CAGLhB,MAAM,iBAAWV,KAAX,CAHD,CAFL,CADN,EAUGsB,KAAK,CAACK,KAAN,EAAeL,KAAK,CAACM,IAVxB,CADF,CADU,EAAX,CADH,CAFF,CADF,CAuBD,C,oBAzDiCpC,S,SAAfM,M","sourcesContent":["/* eslint-disable  */\nimport React, { Component } from \"react\";\nimport queryString from \"query-string\";\n// import PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport css from \"./MoviesPage.module.css\";\nimport SearchBar from \"../components/SearchBar/SearchBar\";\nimport * as articleAPI from \"../services/articles-api\";\n\nexport default class Movies extends Component {\n  state = {\n    query: \"\",\n    movies: [],\n    // notFound: false,\n  };\n\n  componentDidMount() {\n    const parsed = queryString.parse(this.props.location.search).query;\n    if (parsed) {\n      if (parsed !== undefined) {\n        articleAPI.getTrendingMovies(parsed).then(({ data }) => {\n          this.setState({ movies: data.results });\n        });\n      }\n    }\n  }\n\n  onChange = (value) => {\n    this.setState({ query: value });\n  };\n\n  onSearch = (query) => {\n    this.props.history.push({\n      ...this.props.location,\n      search: `query=${query}`,\n    });\n    articleAPI.getMoviesQuery(query).then(({ data }) => {\n      this.setState({ movies: data.results });\n    });\n  };\n\n  render() {\n    const { movies, query } = this.state;\n    return (\n      <div className={css.moviesWrapper}>\n        <SearchBar onSearch={this.onSearch} onChange={this.onChange} />\n        <ul className={css.resultList}>\n          {movies.map((movie) => (\n            <li className={css.resultListItem} key={movie.id}>\n              <Link\n                to={{\n                  pathname: `/movies/${movie.id}`,\n                  state: {\n                    id: movie.id,\n                    from: \"/movies\",\n                    search: `query=${query}`,\n                  },\n                }}\n              >\n                {movie.title || movie.name}\n              </Link>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}