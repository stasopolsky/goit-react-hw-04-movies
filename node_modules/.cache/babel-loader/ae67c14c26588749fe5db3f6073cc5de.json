{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/front-end/goit-react-hw-04-movies/src/pages/Movies.js\";\nimport React from \"react\";\nimport Searchbar from \"../components/Searchbar\";\nimport * as articleAPI from \"../services/articles-api\";\nexport default class Movies extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      allData: [],\n      page: 0,\n      query: \"\"\n    };\n\n    this.getDataByParams = ({\n      query,\n      page\n    }) => {\n      const {\n        allData\n      } = this.state;\n      const scrollHeight = page > 1 ? document.documentElement.scrollHeight : 0;\n      this.setState({\n        isLoading: true\n      });\n      return getImages({\n        query,\n        page\n      }).then(({\n        data\n      }) => this.setState({\n        allData: [...allData, ...data.hits]\n      })) // eslint-disable-next-line no-alert\n      .catch(error => alert(error)).finally(() => {\n        this.setState({\n          isLoading: false\n        });\n        window.scrollTo({\n          top: scrollHeight,\n          behavior: \"smooth\"\n        });\n      });\n    };\n\n    this.handleOnSubmit = e => {\n      this.setState({\n        allData: [],\n        query: e,\n        page: 1\n      });\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      page,\n      query\n    } = this.state;\n\n    if (prevState.page !== page || prevState.query !== query) {\n      if (query !== \"\") {\n        this.getDataByParams({\n          query,\n          page\n        });\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Searchbar, {\n      onSubmit: this.handleOnSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/apple/Documents/front-end/goit-react-hw-04-movies/src/pages/Movies.js"],"names":["React","Searchbar","articleAPI","Movies","Component","state","allData","page","query","getDataByParams","scrollHeight","document","documentElement","setState","isLoading","getImages","then","data","hits","catch","error","alert","finally","window","scrollTo","top","behavior","handleOnSubmit","e","componentDidUpdate","prevProps","prevState","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAO,KAAKC,UAAZ,MAA4B,0BAA5B;AAEA,eAAe,MAAMC,MAAN,SAAqBC,SAArB,CAA+B;AAAA;AAAA;AAAA,SAC5CC,KAD4C,GACpC;AAAEC,MAAAA,OAAO,EAAE,EAAX;AAAeC,MAAAA,IAAI,EAAE,CAArB;AAAwBC,MAAAA,KAAK,EAAE;AAA/B,KADoC;;AAAA,SAY5CC,eAZ4C,GAY1B,CAAC;AAAED,MAAAA,KAAF;AAASD,MAAAA;AAAT,KAAD,KAAqB;AACrC,YAAM;AAAED,QAAAA;AAAF,UAAc,KAAKD,KAAzB;AACA,YAAMK,YAAY,GAAGH,IAAI,GAAG,CAAP,GAAWI,QAAQ,CAACC,eAAT,CAAyBF,YAApC,GAAmD,CAAxE;AACA,WAAKG,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd;AACA,aACEC,SAAS,CAAC;AAAEP,QAAAA,KAAF;AAASD,QAAAA;AAAT,OAAD,CAAT,CACGS,IADH,CACQ,CAAC;AAAEC,QAAAA;AAAF,OAAD,KACJ,KAAKJ,QAAL,CAAc;AAAEP,QAAAA,OAAO,EAAE,CAAC,GAAGA,OAAJ,EAAa,GAAGW,IAAI,CAACC,IAArB;AAAX,OAAd,CAFJ,EAIE;AAJF,OAKGC,KALH,CAKUC,KAAD,IAAWC,KAAK,CAACD,KAAD,CALzB,EAMGE,OANH,CAMW,MAAM;AACb,aAAKT,QAAL,CAAc;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAd;AACAS,QAAAA,MAAM,CAACC,QAAP,CAAgB;AACdC,UAAAA,GAAG,EAAEf,YADS;AAEdgB,UAAAA,QAAQ,EAAE;AAFI,SAAhB;AAID,OAZH,CADF;AAeD,KA/B2C;;AAAA,SAiC5CC,cAjC4C,GAiC1BC,CAAD,IAAO;AACtB,WAAKf,QAAL,CAAc;AAAEP,QAAAA,OAAO,EAAE,EAAX;AAAeE,QAAAA,KAAK,EAAEoB,CAAtB;AAAyBrB,QAAAA,IAAI,EAAE;AAA/B,OAAd;AACD,KAnC2C;AAAA;;AAG5CsB,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACvC,UAAM;AAAExB,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkB,KAAKH,KAA7B;;AACA,QAAI0B,SAAS,CAACxB,IAAV,KAAmBA,IAAnB,IAA2BwB,SAAS,CAACvB,KAAV,KAAoBA,KAAnD,EAA0D;AACxD,UAAIA,KAAK,KAAK,EAAd,EAAkB;AAChB,aAAKC,eAAL,CAAqB;AAAED,UAAAA,KAAF;AAASD,UAAAA;AAAT,SAArB;AACD;AACF;AACF;;AA2BDyB,EAAAA,MAAM,GAAG;AACP,wBACE,uDACE,oBAAC,SAAD;AAAW,MAAA,QAAQ,EAAE,KAAKL,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAKD;;AA3C2C","sourcesContent":["import React from \"react\";\nimport Searchbar from \"../components/Searchbar\";\nimport * as articleAPI from \"../services/articles-api\";\n\nexport default class Movies extends Component {\n  state = { allData: [], page: 0, query: \"\" };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { page, query } = this.state;\n    if (prevState.page !== page || prevState.query !== query) {\n      if (query !== \"\") {\n        this.getDataByParams({ query, page });\n      }\n    }\n  }\n\n  getDataByParams = ({ query, page }) => {\n    const { allData } = this.state;\n    const scrollHeight = page > 1 ? document.documentElement.scrollHeight : 0;\n    this.setState({ isLoading: true });\n    return (\n      getImages({ query, page })\n        .then(({ data }) =>\n          this.setState({ allData: [...allData, ...data.hits] })\n        )\n        // eslint-disable-next-line no-alert\n        .catch((error) => alert(error))\n        .finally(() => {\n          this.setState({ isLoading: false });\n          window.scrollTo({\n            top: scrollHeight,\n            behavior: \"smooth\",\n          });\n        })\n    );\n  };\n\n  handleOnSubmit = (e) => {\n    this.setState({ allData: [], query: e, page: 1 });\n  };\n\n  render() {\n    return (\n      <>\n        <Searchbar onSubmit={this.handleOnSubmit} />\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}